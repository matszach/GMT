<script src='./../gmt.js'></script>
<script src='./../perlin.js'></script>
<style>*{margin: 0;}</style>

<div id='myDiv' style="height: 100%; width: 100%;"></div>

<script>
    
    Gmt.Perlin.init();
    let cw = new Gmt.CanvasWrapper('myDiv');

    new Gmt.Loop(60, loop => {
        let f = loop.getFrame();
        let t = Gmt.Perlin.map2d(300, 200, 30, 30, f, f/2);
        cw.fill('black');
        t.iter((x, y, v) => {
            let r = new Gmt.Rectangle(x * 3, y * 3, 3, 3);
            let col = Gmt.rgb(f % 255, 0, v * 100 + 50);
            cw.fillRect(r, col);
        });
    }).start();

</script>